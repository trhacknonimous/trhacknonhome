!function(){"use strict";!function l(){var e,t,n,r,o=document.getElementById("newsletter-form");function s(){r||(t.style.display="block",r=!0)}o&&(e=document.getElementById("newsletter-submit"),t=document.getElementById("newsletter-details"),n=document.querySelector(".mzp-js-email-field"),r="none"!==window.getComputedStyle(t).display,n.addEventListener("focus",function(){s()}),e.addEventListener("click",function(e){r||(e.preventDefault(),s())}),o.addEventListener("submit",function(e){r||(e.preventDefault(),s())}))}()}(),function(){"use strict";var f=document.getElementById("newsletter-form");if(f){var p=[],y=document.getElementById("newsletter-errors"),r=document.querySelector(".mzp-c-newsletter-content");f.addEventListener("submit",function E(e){if(f.getAttribute("data-skip-xhr"))return!0;if(e.preventDefault(),e.stopPropagation(),p=[],y)for(y.style.display="none";y.firstChild;)y.removeChild(y.firstChild);var t=document.getElementById("format-html"),n=document.getElementById("format-text"),r=n.checked?n.value:t.value,o=document.getElementById("id_email").value,s=document.getElementById("id_newsletters").value,l=document.querySelector('input[name="privacy"]:checked')?"&privacy=true":"",u=document.getElementById("id_country").value,c=document.getElementById("id_lang").value,d="email="+encodeURIComponent(o)+"&newsletters="+s+l+"&fmt="+r+"&country="+u+"&lang="+c+"&source_url="+encodeURIComponent(document.location.href),i=new XMLHttpRequest;i.onload=function(e){if(200<=e.target.status&&e.target.status<300){var t=e.target.response||e.target.responseText;if("object"!=typeof t&&(t=JSON.parse(t)),t.success)f.style.display="none",function r(){document.getElementById("newsletter-thanks").style.display="block"}(),v(),function o(){if("function"==typeof document.CustomEvent)document.dispatchEvent(new CustomEvent("newsletterSuccess",{bubbles:!0,cancelable:!0}));else if("function"==typeof document.createEvent){var e=document.createEvent("Event");e.initEvent("newsletterSuccess",!0,!0),document.dispatchEvent(e)}}(),window.dataLayer&&window.dataLayer.push({event:"newsletter-signup-success",newsletter:s});else{if(t.errors)for(var n=0;n<t.errors.length;n++)p.push(t.errors[n]);g()}}else g()},i.onerror=function(e){g()};var a=f.getAttribute("action");return i.open("POST",a,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.timeout=5e3,i.ontimeout=g,i.responseType="json",i.send(d),function m(){for(var e=f.querySelectorAll("input, select"),t=0;t<e.length;t++)e[t].disabled=!0}(),!1},!1)}function v(){for(var e=f.querySelectorAll("input, select"),t=0;t<e.length;t++)e[t].disabled=!1}function g(){if(v(),p.length){y||((y=document.createElement("div")).id="newsletter-errors",y.className="mzp-c-form-errors",r.insertBefore(y,r.firstChild));for(var e=document.createElement("ul"),t=0;t<p.length;t++){var n=document.createElement("li");n.appendChild(document.createTextNode(p[t])),e.appendChild(n)}y.appendChild(e),y.style.display="block"}else f.setAttribute("data-skip-xhr",!0),f.submit()}}();